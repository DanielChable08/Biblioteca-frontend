<div class="user-catalog-container">
 
  <div class="user-header">
      <div class="header-brand">
        <img src="assets/img/Logo-Dorado.png" alt="Logo" class="brand-logo" />
        <div class="brand-info">
          <span class="brand-title">Biblioteca Física</span>
          <div class="brand-subtitle">Catálogo de libros físicos de la congregación</div>
        </div>
      </div>
      <div class="header-user-section">
        <div class="user-text">
          <span class="user-role">Miembro de la Congregación</span>
          <span class="user-name">Miembro</span>
        </div>
        <div class="user-avatar">M</div>
      </div>
  </div>

      <div class="user-search-section">
          <div class="search-container">
            <i class="pi pi-search search-icon"></i>
            <input type="text" pInputText placeholder="Buscar libros, autores, temas..." 
              class="user-search-input" [(ngModel)]="terminoBusqueda" />
          </div>
          
          <div class="custom-dropdown-container" (click)="toggleDropdown()">
            <div class="custom-dropdown-trigger">
              <i class="pi pi-filter"></i>
              <span>{{ getDropdownText() }}</span>
              <i class="pi pi-chevron-down" [class.rotated]="dropdownOpen"></i>
            </div>
            <div class="custom-dropdown-panel" *ngIf="dropdownOpen">
              <div *ngFor="let categoria of categoriasLista" 
                class="dropdown-option"
                [class.selected]="categoria.value === categoriaSeleccionada"
                (click)="selectCategoria(categoria.value); $event.stopPropagation()">
                <i [class]="categoria.icon"></i>
                <span>{{ categoria.label === 'Todas' ? 'Todas las categorías' : categoria.label }}</span>
                <b>({{ contadorCategorias[categoria.value] }})</b>
              </div>
            </div>
          </div>

            <div class="user-info-row">
              <span class="main-stat">{{ libros.length }} libros en catálogo</span>
              <span class="secondary-stat">Última actualización: Hoy</span>
              <span class="secondary-stat">Libros disponibles para consulta</span>
            </div>
       </div>

  <div class="categories-card">
    <h3 class="categories-title">Categorías</h3>
    <div class="categories-buttons-grid">
      <button *ngFor="let categoria of categoriasLista" 
        [class]="'category-btn ' + (esCategoriaActiva(categoria.value) ? 'active' : '')"
        (click)="filtrarCategoria(categoria.value)">
        <i [class]="categoria.icon"></i>
        <span>{{ categoria.label }}</span>
        <b>{{ contadorCategorias[categoria.value] }}</b>
      </button>
    </div>
  </div>

  
  <div class="books-section-header">
    <div class="section-left">
      <i class="pi pi-star section-star-icon"></i>
      <h2 class="section-title">Libros Disponibles</h2>
    </div>
    <button class="ver-todos-link" (click)="verTodos()">
      <span>Ver todos</span>
      <i class="pi pi-arrow-right"></i>
    </button>
  </div>

 
  <div class="admin-style-books-grid">
    <div *ngFor="let libro of librosFiltrados.slice(0, 4)" class="admin-style-book-card">
  
      <div class="book-image-container">
        <img [src]="libro.img" alt="portada" class="admin-book-img" />
        <span class="status-badge" [ngClass]="getStatusClass(libro.estado)">{{ libro.estado }}</span>
      </div>
      
      
      <div class="book-info-admin-style">
        <h4 class="admin-book-title">{{ libro.titulo }}</h4>
        <p class="admin-book-author">{{ libro.autor }}</p>
        <span class="admin-book-category">{{ libro.categoria }}</span>
        
        <div class="admin-book-details">
          <span class="detail-item"><i class="pi pi-tag"></i> {{ libro.catalogCode }}</span>
          <span class="detail-item"><i class="pi pi-map-marker"></i> {{ libro.location }} - {{ libro.shelf }}</span>
          <span class="detail-item"><i class="pi pi-calendar"></i> {{ libro.publishYear }}</span>
          <span class="detail-item"><i class="pi pi-file"></i> {{ libro.pages }} páginas • {{ libro.format }}</span>
        </div>
      </div>
    </div>
  </div>

 
  <div class="books-section-header" style="margin-top: 3rem;">
    <div class="section-left">
      <i class="pi pi-star section-star-icon"></i>
      <h2 class="section-title">Agregados Recientemente</h2>
    </div>
    <button class="ver-todos-link" (click)="verTodos()">
      <span>Ver todos</span>
      <i class="pi pi-arrow-right"></i>
    </button>
  </div>

  <div class="admin-style-books-grid">
    <div *ngFor="let libro of librosRecientes" class="admin-style-book-card">
      <div class="book-image-container">
        <img [src]="libro.img" alt="portada" class="admin-book-img" />
        <span class="status-badge" [ngClass]="getStatusClass(libro.estado)">{{ libro.estado }}</span>
      </div>
      
      <div class="book-info-admin-style">
        <h4 class="admin-book-title">{{ libro.titulo }}</h4>
        <p class="admin-book-author">{{ libro.autor }}</p>
        <span class="admin-book-category">{{ libro.categoria }}</span>
        
        <div class="admin-book-details">
          <span class="detail-item"><i class="pi pi-tag"></i> {{ libro.catalogCode }}</span>
          <span class="detail-item"><i class="pi pi-map-marker"></i> {{ libro.location }} - {{ libro.shelf }}</span>
          <span class="detail-item"><i class="pi pi-calendar"></i> {{ libro.publishYear }}</span>
          <span class="detail-item"><i class="pi pi-file"></i> {{ libro.pages }} páginas • {{ libro.format }}</span>
        </div>
      </div>
    </div>
  </div> 

 
  <div *ngIf="librosFiltrados.length === 0" class="no-books-message">
    <i class="pi pi-info-circle"></i>
    <h3>No hay libros en esta categoría</h3>
    <p>La categoría "{{ categoriaSeleccionada }}" no contiene libros actualmente.</p>
  </div>
</div>

